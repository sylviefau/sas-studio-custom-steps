{"creationTimeStamp":"2023-04-03T19:09:47.655Z","modifiedTimeStamp":"2023-04-03T19:16:24.232Z","createdBy":"sasadm","modifiedBy":"sasadm","name":"Send SMTP Email.step","displayName":"Send SMTP Email.step","localDisplayName":"Send SMTP Email.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","uri":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","uri":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","uri":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","uri":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","uri":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","uri":"/dataFlows/steps/8c905f5a-8eec-420d-8fcb-133960b40474","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[],"outputPorts":[]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"emailInfo\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Email Message Information\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"emailFrom\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"From:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"emailTo\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"To:\",\n\t\t\t\t\t\"placeholder\": \"(separate mutiple recipients with a comma)\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"sectionCopy\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Copy recipients\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"emailCC\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"cc:\",\n\t\t\t\t\t\t\t\"placeholder\": \"(separate mutiple recipients with a comma)\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"emailBCC\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"bcc:\",\n\t\t\t\t\t\t\t\"placeholder\": \"(separate mutiple recipients with a comma)\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"emailSubject\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Subject:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"emailBody\",\n\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\"label\": \"Body:\",\n\t\t\t\t\t\"placeholder\": \"(Enter your email text here.  If you want this text in a different color use the color selector on the Options tab.)\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"options\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"importance\",\n\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\"label\": \"Importance:\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"High\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"Normal\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"Low\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"textColor\",\n\t\t\t\t\t\"type\": \"colorpicker\",\n\t\t\t\t\t\"label\": \"Email Text Color:\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"readReceipt\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Request Read Receipt?\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"emailSetep\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Email Setup\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"smtpHost\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"SMTP Mail Host:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"smtpPort\",\n\t\t\t\t\t\"type\": \"numberfield\",\n\t\t\t\t\t\"label\": \"SMTP port:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"about\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"aboutText\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The Send SMTP Email custom step enables SAS Studio users to send an email message.  It also allows for the setting of the message's importance, text color, and request a read receipt.\\n\\nRefer to the SAS Viya documentation for more details about configuring an SMTP Email server: https://go.documentation.sas.com/doc/en/pgmsascdc/default/lepg/n1w4ntt16ty6gvn17e68ggvhspwm.htm\\n\\n\\nVersion 2.0 (03APR2023)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"emailFrom\": \"\",\n\t\t\"emailTo\": \"\",\n\t\t\"emailCC\": \"\",\n\t\t\"emailBCC\": \"\",\n\t\t\"emailSubject\": \"\",\n\t\t\"emailBody\": \"\",\n\t\t\"importance\": {\n\t\t\t\"value\": \"Normal\"\n\t\t},\n\t\t\"textColor\": \"000000\",\n\t\t\"readReceipt\": false,\n\t\t\"smtpHost\": \"\",\n\t\t\"smtpPort\": 25\n\t}\n}","templates":{"SAS":"/* Set email options */\noptions \n\temailsys=smtp\n\temailhost=&smtpHost \n\temailport=&smtpPort\n;\n\n\n/* if emailBody_count is empty (doesnt exist) create it and create emailBody_1 */\n%global emailBody_count ;\n%if &emailBody_count eq %then %do ; \n\t%let emailBody_count=1 ;\n\t%let emailBody_1=&emailBody ;\n%end ;\n\n\n/* Format input information if multiple email addresses entered */\ndata _null_ ;\n    newEmailTo=cats(transtrn(strip(compbl(translate(\"&emailTo\",\" \",\",\"))),\" \",'\" \"')) ;\n    call symput('emailTo',strip(newEmailTo)) ;\n    newEmailCC=cats(transtrn(strip(compbl(translate(\"&emailCC\",\" \",\",\"))),\" \",'\" \"')) ;\n    call symput('emailCC',strip(newEmailCC)) ;\n    newEmailBCC=cats(transtrn(strip(compbl(translate(\"&emailBCC\",\" \",\",\"))),\" \",'\" \"')) ;\n    call symput('emailBCC',strip(newEmailBCC)) ;\nrun ;\n\n\n/* Format and send email */\nfilename outmail email\n\tfrom=\"&emailFrom\"\n \tto=(\"&emailTo\")\n\tcc=(\"&emailCC\")\n\tbcc=(\"&emailBCC\")\n\tsubject=\"&emailSubject\"\n \timportance=\"&importance\" /* Low Normal High.  Default is Normal */\n\t/* If ReadReceipt option is checked */\n\t%if &readReceipt %then %do ;\n\t\treadreceipt\n\t%end ;\n \tct=\"text/html\"\n;\n\n\n/* Build the body of the email */\ndata _null_ ;\n\tfile outmail ;\n\tput \"<html><body>\" ;\n    put \"<p style='color: #&textColor'>\" ;\n\tdo i = 1 to &emailBody_count ;\n        if symget(\"emailBody_\" || strip(put(i,12.))) eq '' then do ;\n\t\t\ttext=cats(\"<br>\") ;\n        end ;\n        else do ;\n\t\t\ttext=cats(symget(\"emailBody_\" || strip(put(i,12.))),\"<br>\") ;\n\t\tend ;\n\t\tput text ;\n\tend ;\n    put \"</p>\" ;\n\tput \"</body></html>\" ;\nrun ;\n\n\n/* Clear macro */\n%symdel emailBody_count ;"}}